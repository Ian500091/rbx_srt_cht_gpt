-- Create a LocalScript in StarterPlayerScripts

local player = game.Players.LocalPlayer

-- UI Creation
local ui = Instance.new("ScreenGui")
ui.Name = "CustomUI"

-- Option 1: "miau"
local option1 = Instance.new("TextButton")
option1.Name = "miau"
option1.Text = "Miau"
option1.Parent = ui
option1.MouseButton1Click:Connect(function()
    player.Character:BreakJoints()
end)

-- Option 2: "aimpaulo"
local option2 = Instance.new("TextButton")
option2.Name = "aimpaulo"
option2.Text = "Aimpaulo"
option2.Parent = ui
local aiming = false
option2.MouseButton1Click:Connect(function()
    aiming = not aiming
end)

-- Option 3: "destruir ui"
local option3 = Instance.new("TextButton")
option3.Name = "destruir ui"
option3.Text = "Destruir UI"
option3.Parent = ui
option3.MouseButton1Click:Connect(function()
    aiming = false
    ui:Destroy()
end)

-- Option 4: "espum"
local option4 = Instance.new("TextButton")
option4.Name = "espum"
option4.Text = "Espum"
option4.Parent = ui
local espum = false
option4.MouseButton1Click:Connect(function()
    espum = not espum
end)

-- Keybinds
game:GetService("UserInputService").InputBegan:Connect(function(input)
    if input.KeyCode == Enum.KeyCode.K then
        aiming = not aiming
    end
end)

ui.Parent = player:WaitForChild("PlayerGui")

-- Update Loop
while true do
    wait(2)
    if aiming then
        -- Find nearest player
        local nearestPlayer = nil
        local nearestDistance = math.huge
        for _, otherPlayer in ipairs(game.Players:GetPlayers()) do
            if otherPlayer ~= player then
                local distance = (otherPlayer.Character.HumanoidRootPart.Position - player.Character.HumanoidRootPart.Position).Magnitude
                if distance < nearestDistance then
                    nearestPlayer = otherPlayer
                    nearestDistance = distance
                end
            end
        end
        if nearestPlayer then
            workspace.CurrentCamera.CFrame = CFrame.new(workspace.CurrentCamera.CFrame.Position, nearestPlayer.Character.HumanoidRootPart.Position)
        end
    end

    if espum then
        -- Add selection boxes
        for _, otherPlayer in ipairs(game.Players:GetPlayers()) do
            if otherPlayer ~= player and otherPlayer.Character then
                for _, part in ipairs(otherPlayer.Character:GetChildren()) do
                    if part:IsA("BasePart") then
                        local selectionBox = Instance.new("SelectionBox")
                        selectionBox.Adornee = part
                        selectionBox.Color3 = Color3.new(0, 1, 0) -- Green color
                        selectionBox.Name = "ESP"
                        selectionBox.LineThickness = 0.05
                        selectionBox.SurfaceTransparency = 0.7
                        selectionBox.SurfaceColor3 = Color3.new(0, 1, 0)
                        selectionBox.Parent = part
                        local label = Instance.new("TextLabel")
                        label.Text = otherPlayer.Name
                        label.Size = UDim2.new(0, 100, 0, 20)
                        label.Position = UDim2.new(0, 0, 0, -30)
                        label.Parent = selectionBox
                    end
                end
            end
        end
    else
        -- Remove selection boxes
        for _, otherPlayer in ipairs(game.Players:GetPlayers()) do
            if otherPlayer ~= player and otherPlayer.Character then
                for _, part in ipairs(otherPlayer.Character:GetChildren()) do
                    if part:IsA("BasePart") then
                        local selectionBox = part:FindFirstChild("ESP")
                        if selectionBox then
                            selectionBox:Destroy()
                        end
                    end
                end
            end
        end
    end
end
